<!DOCTYPE html>  <html> <head>   <title>skull.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               skull.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Skull.js 0.0.1-alpha
Build Date: 2012-09-29</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>(c) 2012 Kristofer Joseph.
Skull may be freely distributed under the MIT license.
For all details and documentation:
http://www.skulljs.com</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h1>Skull</h1>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">global</span><span class="p">)</span> <span class="p">{</span>
    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Define the Skull namespace by
 using the existing one or creating a new object</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">Skull</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Hijack Backbone's extend method to use with Skull objects</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">Skull</span><span class="p">.</span><span class="nx">extend</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">;</span>

<span class="p">})(</span><span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h1>EventMap</h1>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">global</span><span class="p">)</span> <span class="p">{</span>
    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Define the Skull namespace by
 using the existing one or creating a new object</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">Skull</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>EventMap is used to dispatch application wide events.
 Clone of Backbone.Events with class level api exposed</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">EventMap</span> <span class="o">=</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">EventMap</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Events</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Publish events on the event map</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">EventMap</span><span class="p">.</span><span class="nx">publish</span> <span class="o">=</span> <span class="nx">EventMap</span><span class="p">.</span><span class="nx">trigger</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Subscribe to events on the event map</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">EventMap</span><span class="p">.</span><span class="nx">subscribe</span> <span class="o">=</span> <span class="nx">EventMap</span><span class="p">.</span><span class="nx">on</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Unsubscribe from events on the event map</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">EventMap</span><span class="p">.</span><span class="nx">unsubscribe</span> <span class="o">=</span> <span class="nx">EventMap</span><span class="p">.</span><span class="nx">off</span><span class="p">;</span>

<span class="p">})(</span><span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h1>CareTaker</h1>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">global</span><span class="p">)</span> <span class="p">{</span>
    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Define the Skull namespace by
 using the existing one or creating a new object</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">Skull</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>CareTaker is used to manage the stacks of state</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">CareTaker</span> <span class="o">=</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">CareTaker</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">undoStack</span> <span class="o">=</span> <span class="p">[],</span>
            <span class="nx">redoStack</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">return</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Add a memento to the undo stack</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">addMemento</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">memento</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">undoStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">memento</span><span class="p">);</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
            <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Undoes the last action on the stack</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">undo</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">undoStack</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">memento</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">undoStack</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span>
                        <span class="nx">originator</span> <span class="o">=</span> <span class="nx">memento</span><span class="p">.</span><span class="nx">originator</span><span class="p">;</span>

                    <span class="k">if</span> <span class="p">(</span><span class="nx">originator</span> <span class="o">&amp;&amp;</span> <span class="nx">originator</span><span class="p">.</span><span class="nx">setMemento</span> <span class="o">&amp;&amp;</span> <span class="nx">originator</span><span class="p">.</span><span class="nx">createMemento</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">redoStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">originator</span><span class="p">.</span><span class="nx">createMemento</span><span class="p">());</span>
                        <span class="nx">originator</span><span class="p">.</span><span class="nx">setMemento</span><span class="p">(</span><span class="nx">memento</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
            <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Redoes the last action on the stack</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">redo</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">redoStack</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">memento</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">redoStack</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span>
                        <span class="nx">originator</span> <span class="o">=</span> <span class="nx">memento</span><span class="p">.</span><span class="nx">originator</span><span class="p">;</span>

                    <span class="k">if</span> <span class="p">(</span><span class="nx">originator</span> <span class="o">&amp;&amp;</span> <span class="nx">originator</span><span class="p">.</span><span class="nx">setMemento</span> <span class="o">&amp;&amp;</span> <span class="nx">originator</span><span class="p">.</span><span class="nx">createMemento</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">undoStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">originator</span><span class="p">.</span><span class="nx">createMemento</span><span class="p">());</span>
                        <span class="nx">originator</span><span class="p">.</span><span class="nx">setMemento</span><span class="p">(</span><span class="nx">memento</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">};</span>
    <span class="p">}();</span>

<span class="p">})(</span><span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <h1>Originator</h1>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">global</span><span class="p">)</span> <span class="p">{</span>
    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Define the Skull namespace by
 using the existing one or creating a new object</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">Skull</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Originator object is a model with memento functionality</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">Originator</span> <span class="o">=</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">Originator</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">&amp;&amp;</span> <span class="nx">options</span><span class="p">.</span><span class="nx">eventMap</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">eventMap</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">eventMap</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">eventMap</span> <span class="o">=</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">EventMap</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Originator</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Creates a memento object for storing state. Stores only the deltas.
 Override this function to supply your own serialization routine.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">createMemento</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">hash</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">memento</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">Memento</span><span class="p">({</span>
                <span class="nx">originator</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span>
                <span class="nx">state</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">changedAttributes</span><span class="p">(</span><span class="nx">hash</span><span class="p">)</span>
            <span class="p">});</span>

            <span class="k">return</span> <span class="nx">memento</span><span class="p">;</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Sets a memento object to restore state.
 Override this function to supply your own way to restore state.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">setMemento</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">memento</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">state</span> <span class="o">=</span> <span class="nx">memento</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">state</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">reset</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">reset</span><span class="p">(</span><span class="nx">state</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;You need to override setMemento to supply a way to set your state&quot;</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Creates a memento and sends it along with an event to be stored then calls set</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">store</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">hash</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Checks to see if there is anything in the hash before doing any work</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">(</span><span class="nx">hash</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">eventMap</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;Memento:Store&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">createMemento</span><span class="p">(</span><span class="nx">hash</span><span class="p">));</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Calls set after storing the delta</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">hash</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Supply an extend function to allow inheritance</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">Originator</span><span class="p">.</span><span class="nx">extend</span> <span class="o">=</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">extend</span><span class="p">;</span>

<span class="p">})(</span><span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <h1>Memento</h1>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">global</span><span class="p">)</span> <span class="p">{</span>
    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Define the Skull namespace by
 using the existing one or creating a new object</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">Skull</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Memento object is api support for creating Mementos for storing state.
 You can pass in the originator and state to the constructor</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">Memento</span> <span class="o">=</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">Memento</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">opts</span>       <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{},</span>
            <span class="nx">originator</span> <span class="o">=</span> <span class="p">{},</span>
            <span class="nx">state</span>      <span class="o">=</span> <span class="p">{};</span>
        <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Memento</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Returns the originator object</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">getOriginator</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">originator</span><span class="p">;</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Sets the originator object</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">setOriginator</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">originator</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">originator</span> <span class="o">=</span> <span class="nx">originator</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Returns the state object</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">getState</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Sets the state object</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">setState</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">state</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">});</span>

<span class="p">})(</span><span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <h1>Command</h1>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">global</span><span class="p">)</span> <span class="p">{</span>
    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Define the Skull namespace by
 using the existing one or creating a new object</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">Skull</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Command object instances are used to execute application commands</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">Command</span> <span class="o">=</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">Command</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
    <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Executes the command.
 Override this function.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">execute</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Allows the command object to be extended</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">Command</span><span class="p">.</span><span class="nx">extend</span> <span class="o">=</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">extend</span><span class="p">;</span>

<span class="p">})(</span><span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <h1>CommandMap</h1>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">global</span><span class="p">)</span> <span class="p">{</span>
    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Define the Skull namespace by
 using the existing one or creating a new object</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">Skull</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">Skull</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>CommandMap is used to map commands to application events</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">CommandMap</span> <span class="o">=</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">CommandMap</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">eventMap</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Allow a passed in event map to be used.
 Default to the Skull.EventMap</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">evtMap</span> <span class="o">=</span> <span class="nx">eventMap</span> <span class="o">||</span> <span class="nx">Skull</span><span class="p">.</span><span class="nx">EventMap</span><span class="p">;</span>

            <span class="k">return</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Add a command to the command map.
Supply the event to trigger it.</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">addCommand</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">cmd</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">cmd</span><span class="p">.</span><span class="nx">execute</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">evtMap</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">cmd</span><span class="p">.</span><span class="nx">execute</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;No execute method found&quot;</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
                <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Remove a command from the command map</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">removeCommand</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">cmd</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">evtMap</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">cmd</span><span class="p">);</span>
                    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">};</span>
        <span class="p">}();</span>

<span class="p">})(</span><span class="k">this</span><span class="p">);</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 